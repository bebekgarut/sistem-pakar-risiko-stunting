<!DOCTYPE html>
<html>
  <head>
    <title>Risiko Stunting</title>
    <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet" />
  </head>
  <body class="bg-orange-200">
    <div class="p-4">
      <p class="text-center text-4xl font-bold mb-4">Risiko Stunting - Sistem Pakar</p>
      <div>
        <div>
          <form method="POST">
            <div class="grid grid-cols-5 gap-6 mb-4">
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/usia ibu.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Usia Ibu</label>
                <input type="number" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400" placeholder="Usia Ibu" name="usia_ibu" />
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/imt.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Index Masa Tubuh</label>
                <input type="number" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400" placeholder="Index Masa Tubuh" name="imt" />
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/riwayat penyakit.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Riwayat Penyakit</label>
                <select name="riwayat_penyakit" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="ada">Ada</option>
                  <option value="tidak ada">Tidak Ada</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/konsumsi makanan.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Konsumsi Makanan</label>
                <select name="konsumsi_makanan" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="gizi seimbang">Gizi Seimbang</option>
                  <option value="rendah nutrisi">Rendah Nutrisi</option>
                </select>
              </div>

              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/kestabilan mental.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Kestabilan Mental</label>
                <select name="ketidakstabilan_mental" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="stabil">Stabil</option>
                  <option value="tidak stabil">Tidak Stabil</option>
                </select>
              </div>

              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/terpapar.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Terpapar Asap Rokok</label>
                <select name="terpapar" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="aktif">Aktif</option>
                  <option value="pasif">Pasif</option>
                  <option value="tidak terpapar">Tidak Terpapar</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/sanitasi.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Sanitasi & Kebersihan</label>
                <select name="sanitasi" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="baik">Baik</option>
                  <option value="buruk">Buruk</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/kualitas air.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Kualitas Air</label>
                <select name="kualitas_air" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="bersih">Bersih</option>
                  <option value="tidak bersih">Tidak Bersih</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/usia kehamilan.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Usia Kehamilan</label>
                <select name="usia_kehamilan" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="trimester 1">Trimester 1</option>
                  <option value="trimester 2">Trimester 2</option>
                  <option value="trimester 3">Trimester 3</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/frekuensi.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Frekuensi Pemeriksaan</label>
                <input type="number" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400" placeholder="Pada trimester sekarang" name="frekuensi_pemeriksaan" />
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl col-start-2">
                <img src="{{ url_for('static', filename='img/konsumsi suplemen.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Konsumsi Suplemen</label>
                <select name="konsumsi_suplemen" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="ya">Ya</option>
                  <option value="tidak">Tidak</option>
                </select>
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/jarak kehamilan.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Jarak Kehamilan</label>
                <input type="number" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400" placeholder="Jarak Kehamilan" name="jarak_kehamilan" />
              </div>
              <div class="p-2 flex flex-col items-center bg-amber-200 rounded-b-3xl rounded-tr-4xl">
                <img src="{{ url_for('static', filename='img/pemakaian kb.jpg') }}" class="w-6/12 rounded-2xl mb-1" alt="ibu" />
                <label class="mb-1 text-amber-600 font-semibold text-lg">Pemakaian KB</label>
                <select name="pemakaian_kb" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-8/12">
                  <option value="" disabled selected>Pilih</option>
                  <option value="ya">Ya</option>
                  <option value="tidak">Tidak</option>
                </select>
              </div>
            </div>
            <div class="flex justify-center items-center">
              <button type="submit" name="init" class="px-2 py-1 bg-amber-700 rounded-lg border-2 border-amber-50 text-white text-lg font-semibold">Simpan dan Lanjut</button>
            </div>
          </form>
        </div>
        {% if pertanyaan %}
          <div id="modal" class="fixed w-full h-full inset-0 bg-black/50 items-center justify-center hidden transition-all duration-300 ease-in-out">
            <div class="bg-white p-8 rounded-xl shadow-xl w-1/3 relative transform transition-all duration-300 ease-in-out scale-95" id="modalContent">
              <p class="text-xl font-bold mb-4 text-amber-500">Pertanyaan</p>
              <form method="POST">
                <div class="flex flex-col">
                  <label class="mb-2">{{ pertanyaan.replace('_', ' ')|capitalize }}:</label>
                  {% if pertanyaan == 'usia_ibu' or pertanyaan == 'imt' or pertanyaan == 'frekuensi_pemeriksaan' or pertanyaan == 'jarak_kehamilan' %}
                    <input type="number" name="nilai" class="border-2 border-amber-400 rounded-lg px-2 py-1" required />
                  {% elif pertanyaan == 'riwayat_penyakit' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="ada">Ada</option>
                      <option value="tidak ada">Tidak Ada</option>
                    </select>
                  {% elif pertanyaan == 'konsumsi_makanan' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="gizi seimbang">Gizi Seimbang</option>
                      <option value="rendah nutrisi">Rendah Nutrisi</option>
                    </select>
                  {% elif pertanyaan == 'ketidakstabilan_mental' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="stabil">Stabil</option>
                      <option value="tidak stabil">Tidak Stabil</option>
                    </select>
                  {% elif pertanyaan == 'terpapar' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="aktif">Aktif</option>
                      <option value="pasif">Pasif</option>
                      <option value="tidak terpapar">Tidak Terpapar</option>
                    </select>
                  {% elif pertanyaan == 'sanitasi' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="baik">Baik</option>
                      <option value="buruk">Buruk</option>
                    </select>
                  {% elif pertanyaan == 'kualitas_air' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="bersih">Bersih</option>
                      <option value="tidak bersih">Tidak Bersih</option>
                    </select>
                  {% elif pertanyaan == 'usia_kehamilan' %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="trimester 1">Trimester 1</option>
                      <option value="trimester 2">Trimester 2</option>
                      <option value="trimester 3">Trimester 3</option>
                    </select>
                  {% else %}
                    <select name="nilai" id="" class="bg-amber-50 rounded-lg text-sm p-2 border-2 border-amber-400 w-full">
                      <option value="" disabled selected>Pilih</option>
                      <option value="ya">Ya</option>
                      <option value="tidak">Tidak</option>
                    </select>
                  {% endif %}
                  <input type="hidden" name="premis" value="{{ pertanyaan }}" />
                  <button type="submit" class="mt-5 px-4 py-2 rounded-xl bg-amber-400 text-white font-bold">Simpan Jawaban</button>
                </div>
              </form>
            </div>
          </div>
        {% endif %}

        {% if fakta %}
          <hr />
          <h3>Fakta Saat Ini:</h3>
          <ul>
            {% for key, value in fakta.items() %}
              {% if value %}
                <li>
                  <strong>{{ key.replace('_', ' ')|capitalize }}</strong>: {{ value }}
                </li>
              {% endif %}
            {% endfor %}
          </ul>
          <a href="{{ url_for('reset') }}">Reset Data</a>
        {% endif %}
      </div>
    </div>

    <script>
      function openModal() {
        const modal = document.getElementById('modal')
        const modalContent = document.getElementById('modalContent')
      
        modal.classList.remove('hidden')
        modal.classList.add('flex')
      
        setTimeout(() => {
          modalContent.classList.remove('opacity-0', 'scale-95')
          modalContent.classList.add('opacity-100', 'scale-100')
        }, 10)
      }
    </script>

    <script>
      const adaPertanyaan = {{ 'true' if pertanyaan else 'false' }};
    
      window.addEventListener('DOMContentLoaded', () => {
        if (adaPertanyaan) {
          openModal();
        }
      });
    </script>
  </body>
</html>
